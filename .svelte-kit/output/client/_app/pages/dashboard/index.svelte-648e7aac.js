var e=Object.defineProperty,s=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,l=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;import{C as r,S as n,i,s as c,e as o,t as f,k as h,c as u,a as d,g as v,d as m,n as $,b as g,f as p,D as E,h as w,E as P,R as y,j as b,m as D,T as x,o as I,H as V,I as G,v as S,U as M,V as k,W as T,r as j,w as C,X as H,Y as F,z as O,Z as A,_ as U,$ as L,a0 as N,u as W,a1 as B,L as R,B as z,a2 as X,a3 as Y,a4 as Z,a5 as _,a6 as q,a7 as J}from"../../chunks/vendor-ce82561a.js";import{s as K}from"../../chunks/stores-62b324a6.js";const Q=r([]),ee={subscribe:Q.subscribe,setCurrentWeekShifts:e=>{Q.set(e)},addCurrentWeekShift:e=>{const r=((e,r)=>{for(var n in r||(r={}))s.call(r,n)&&l(e,n,r[n]);if(t)for(var n of t(r))a.call(r,n)&&l(e,n,r[n]);return e})({},e);Q.update((e=>[...e,r]))}};function se(e){let s,t,a,l,r,n,i,c,y=e[2]?"$":"";return{c(){s=o("div"),t=o("p"),a=o("span"),l=f(y),r=f(e[1]),n=h(),i=o("h3"),c=f(e[0]),this.h()},l(o){s=u(o,"DIV",{class:!0});var f=d(s);t=u(f,"P",{class:!0});var h=d(t);a=u(h,"SPAN",{class:!0});var g=d(a);l=v(g,y),g.forEach(m),r=v(h,e[1]),h.forEach(m),n=$(f),i=u(f,"H3",{class:!0});var p=d(i);c=v(p,e[0]),p.forEach(m),f.forEach(m),this.h()},h(){g(a,"class","font-light"),g(t,"class","svelte-17l3umk"),g(i,"class","svelte-17l3umk"),g(s,"class","box svelte-17l3umk")},m(e,o){p(e,s,o),E(s,t),E(t,a),E(a,l),E(t,r),E(s,n),E(s,i),E(i,c)},p(e,[s]){4&s&&y!==(y=e[2]?"$":"")&&w(l,y),2&s&&w(r,e[1]),1&s&&w(c,e[0])},i:P,o:P,d(e){e&&m(s)}}}function te(e,s,t){let{title:a="Gas Price"}=s,{value:l=3.22}=s,{isDollarValue:r=!1}=s;return e.$$set=e=>{"title"in e&&t(0,a=e.title),"value"in e&&t(1,l=e.value),"isDollarValue"in e&&t(2,r=e.isDollarValue)},[a,l,r]}class ae extends n{constructor(e){super(),i(this,e,te,se,c,{title:0,value:1,isDollarValue:2})}}function le(e){let s,t,a,l,r,n,i,c,w,P,F,O,A,U,L,N,W,B,R,z,X,Y,Z,_,q,J,K,Q,ee,se,te,ae,le;return Y=new y({}),{c(){s=o("div"),t=o("h3"),a=f("Add Shift Info:"),l=h(),r=o("form"),n=o("div"),i=o("input"),c=h(),w=o("div"),P=o("input"),F=h(),O=o("div"),A=o("input"),U=h(),L=o("div"),N=o("input"),W=h(),B=o("div"),R=o("input"),z=h(),X=o("div"),b(Y.$$.fragment),Z=h(),_=o("div"),q=o("button"),J=f("Add Shift"),K=h(),Q=o("a"),ee=f("Cancel"),this.h()},l(e){s=u(e,"DIV",{class:!0});var o=d(s);t=u(o,"H3",{class:!0});var f=d(t);a=v(f,"Add Shift Info:"),f.forEach(m),l=$(o),r=u(o,"FORM",{});var h=d(r);n=u(h,"DIV",{class:!0});var g=d(n);i=u(g,"INPUT",{type:!0,placeholder:!0,class:!0}),g.forEach(m),c=$(h),w=u(h,"DIV",{class:!0});var p=d(w);P=u(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(m),F=$(h),O=u(h,"DIV",{class:!0});var E=d(O);A=u(E,"INPUT",{type:!0,placeholder:!0,class:!0}),E.forEach(m),U=$(h),L=u(h,"DIV",{class:!0});var y=d(L);N=u(y,"INPUT",{type:!0,placeholder:!0,class:!0}),y.forEach(m),W=$(h),B=u(h,"DIV",{class:!0});var b=d(B);R=u(b,"INPUT",{type:!0,placeholder:!0,class:!0}),b.forEach(m),z=$(h),X=u(h,"DIV",{class:!0});var x=d(X);D(Y.$$.fragment,x),x.forEach(m),Z=$(h),_=u(h,"DIV",{class:!0});var I=d(_);q=u(I,"BUTTON",{type:!0,class:!0});var V=d(q);J=v(V,"Add Shift"),V.forEach(m),K=$(I),Q=u(I,"A",{href:!0});var G=d(Q);ee=v(G,"Cancel"),G.forEach(m),I.forEach(m),h.forEach(m),o.forEach(m),this.h()},h(){g(t,"class","svelte-1u2yj6b"),g(i,"type","text"),g(i,"placeholder","Miles driven"),g(i,"class","svelte-1u2yj6b"),g(n,"class","mb-3"),g(P,"type","text"),g(P,"placeholder","Miles per gallon"),g(P,"class","svelte-1u2yj6b"),g(w,"class","mb-3"),g(A,"type","text"),g(A,"placeholder","Shift Length"),g(A,"class","svelte-1u2yj6b"),g(O,"class","mb-3"),g(N,"type","text"),g(N,"placeholder","Gas Price"),g(N,"class","svelte-1u2yj6b"),g(L,"class","mb-3"),g(R,"type","text"),g(R,"placeholder","Gross Earned"),g(R,"class","svelte-1u2yj6b"),g(B,"class","mb-3"),g(X,"class","mb-3"),g(q,"type","submit"),g(q,"class","svelte-1u2yj6b"),g(Q,"href","."),g(_,"class","flex flex-row justify-between items-center"),g(s,"class","container svelte-1u2yj6b")},m(o,f){p(o,s,f),E(s,t),E(t,a),E(s,l),E(s,r),E(r,n),E(n,i),e[8](i),x(i,e[0]),E(r,c),E(r,w),E(w,P),x(P,e[1]),E(r,F),E(r,O),E(O,A),x(A,e[4]),E(r,U),E(r,L),E(L,N),x(N,e[2]),E(r,W),E(r,B),E(B,R),x(R,e[3]),E(r,z),E(r,X),I(Y,X,null),E(r,Z),E(r,_),E(_,q),E(q,J),E(_,K),E(_,Q),E(Q,ee),te=!0,ae||(le=[V(i,"input",e[9]),V(P,"input",e[10]),V(A,"input",e[11]),V(N,"input",e[12]),V(R,"input",e[13]),V(Q,"click",G(e[7])),V(r,"submit",G(e[6]))],ae=!0)},p(e,[s]){1&s&&i.value!==e[0]&&x(i,e[0]),2&s&&P.value!==e[1]&&x(P,e[1]),16&s&&A.value!==e[4]&&x(A,e[4]),4&s&&N.value!==e[2]&&x(N,e[2]),8&s&&R.value!==e[3]&&x(R,e[3])},i(e){te||(S(Y.$$.fragment,e),se||M((()=>{se=k(s,T,{duration:200}),se.start()})),te=!0)},o(e){j(Y.$$.fragment,e),te=!1},d(t){t&&m(s),e[8](null),C(Y),ae=!1,H(le)}}}function re(e,s,t){const a=F();let{miles:l}=s,{milesPerGallon:r}=s,{gasPrice:n}=s,{grossEarned:i}=s,{shiftLength:c}=s,{milesInput:o}=s;return O((()=>{setTimeout((()=>{o.focus()}),200)})),e.$$set=e=>{"miles"in e&&t(0,l=e.miles),"milesPerGallon"in e&&t(1,r=e.milesPerGallon),"gasPrice"in e&&t(2,n=e.gasPrice),"grossEarned"in e&&t(3,i=e.grossEarned),"shiftLength"in e&&t(4,c=e.shiftLength),"milesInput"in e&&t(5,o=e.milesInput)},[l,r,n,i,c,o,function(){const e=l/r,s=e*n,t=i-s;a("addShift",{miles:l,milesPerGallon:r,gasPrice:n,grossEarned:i,shiftLength:c,gasUsed:e,gasCost:s,netEarned:t,netPerHour:t/c,netPerMile:t/l})},function(){a("cancelAddShift")},function(e){A[e?"unshift":"push"]((()=>{o=e,t(5,o)}))},function(){l=this.value,t(0,l)},function(){r=this.value,t(1,r)},function(){c=this.value,t(4,c)},function(){n=this.value,t(2,n)},function(){i=this.value,t(3,i)}]}class ne extends n{constructor(e){super(),i(this,e,re,le,c,{miles:0,milesPerGallon:1,gasPrice:2,grossEarned:3,shiftLength:4,milesInput:5})}}function ie(e){let s,t,a,l,r,n,i,c,y,b,D,x,I,V,G,S,M,k,T,j,C,H,F,O,A,L,N,W,B,R=U(new Date(e[0].shiftDate.toDate()),"MMM d")+"",z=e[0].miles+"",X=e[0].milesPerGallon+"",Y=e[0].gasCost.toFixed(2)+"",Z=e[0].grossEarned+"",_=e[0].netPerHour.toFixed(2)+"";return{c(){s=o("div"),t=o("div"),a=o("p"),l=f(R),r=h(),n=o("div"),i=o("p"),c=f(z),y=f(" miles"),b=h(),D=o("div"),x=o("p"),I=f(X),V=f(" MPG"),G=h(),S=o("div"),M=o("p"),k=f(Y),T=f(" Gas Cost"),j=h(),C=o("div"),H=o("p"),F=f(Z),O=f(" Gross"),A=h(),L=o("div"),N=o("p"),W=f(_),B=f(" Net Per Hour"),this.h()},l(e){s=u(e,"DIV",{class:!0});var o=d(s);t=u(o,"DIV",{class:!0});var f=d(t);a=u(f,"P",{class:!0});var h=d(a);l=v(h,R),h.forEach(m),f.forEach(m),r=$(o),n=u(o,"DIV",{class:!0});var g=d(n);i=u(g,"P",{class:!0});var p=d(i);c=v(p,z),y=v(p," miles"),p.forEach(m),g.forEach(m),b=$(o),D=u(o,"DIV",{class:!0});var E=d(D);x=u(E,"P",{class:!0});var w=d(x);I=v(w,X),V=v(w," MPG"),w.forEach(m),E.forEach(m),G=$(o),S=u(o,"DIV",{class:!0});var P=d(S);M=u(P,"P",{class:!0});var U=d(M);k=v(U,Y),T=v(U," Gas Cost"),U.forEach(m),P.forEach(m),j=$(o),C=u(o,"DIV",{class:!0});var q=d(C);H=u(q,"P",{class:!0});var J=d(H);F=v(J,Z),O=v(J," Gross"),J.forEach(m),q.forEach(m),A=$(o),L=u(o,"DIV",{class:!0});var K=d(L);N=u(K,"P",{class:!0});var Q=d(N);W=v(Q,_),B=v(Q," Net Per Hour"),Q.forEach(m),K.forEach(m),o.forEach(m),this.h()},h(){g(a,"class","text-white svelte-ffwlhg"),g(t,"class","flex-1"),g(i,"class","text-white svelte-ffwlhg"),g(n,"class","flex-1"),g(x,"class","text-white svelte-ffwlhg"),g(D,"class","flex-1"),g(M,"class","text-white svelte-ffwlhg"),g(S,"class","flex-1"),g(H,"class","text-white svelte-ffwlhg"),g(C,"class","flex-1"),g(N,"class","text-white svelte-ffwlhg"),g(L,"class","flex-1"),g(s,"class","item flex flex-row items-center px-5 py-3 rounded mb-3")},m(e,o){p(e,s,o),E(s,t),E(t,a),E(a,l),E(s,r),E(s,n),E(n,i),E(i,c),E(i,y),E(s,b),E(s,D),E(D,x),E(x,I),E(x,V),E(s,G),E(s,S),E(S,M),E(M,k),E(M,T),E(s,j),E(s,C),E(C,H),E(H,F),E(H,O),E(s,A),E(s,L),E(L,N),E(N,W),E(N,B)},p(e,[s]){1&s&&R!==(R=U(new Date(e[0].shiftDate.toDate()),"MMM d")+"")&&w(l,R),1&s&&z!==(z=e[0].miles+"")&&w(c,z),1&s&&X!==(X=e[0].milesPerGallon+"")&&w(I,X),1&s&&Y!==(Y=e[0].gasCost.toFixed(2)+"")&&w(k,Y),1&s&&Z!==(Z=e[0].grossEarned+"")&&w(F,Z),1&s&&_!==(_=e[0].netPerHour.toFixed(2)+"")&&w(W,_)},i:P,o:P,d(e){e&&m(s)}}}function ce(e,s,t){let{shift:a}=s;return e.$$set=e=>{"shift"in e&&t(0,a=e.shift)},[a]}class oe extends n{constructor(e){super(),i(this,e,ce,ie,c,{shift:0})}}function fe(e,s,t){const a=e.slice();return a[26]=s[t],a[28]=t,a}function he(e){let s,t,a,l,r;return{c(){s=o("button"),t=f("Add Shift"),this.h()},l(e){s=u(e,"BUTTON",{class:!0});var a=d(s);t=v(a,"Add Shift"),a.forEach(m),this.h()},h(){g(s,"class","svelte-1wmwb3s")},m(a,n){p(a,s,n),E(s,t),l||(r=V(s,"click",e[20]),l=!0)},p:P,i(e){a||M((()=>{a=k(s,T,{delay:100,duration:200}),a.start()}))},o:P,d(e){e&&m(s),l=!1,r()}}}function ue(e){let s,t;return s=new ne({props:{miles:e[2],milesPerGallon:e[3],gasPrice:e[4],grossEarned:e[5],shiftLength:e[6]}}),s.$on("cancelAddShift",e[21]),s.$on("addShift",e[12]),{c(){b(s.$$.fragment)},l(e){D(s.$$.fragment,e)},m(e,a){I(s,e,a),t=!0},p(e,t){const a={};4&t&&(a.miles=e[2]),8&t&&(a.milesPerGallon=e[3]),16&t&&(a.gasPrice=e[4]),32&t&&(a.grossEarned=e[5]),64&t&&(a.shiftLength=e[6]),s.$set(a)},i(e){t||(S(s.$$.fragment,e),t=!0)},o(e){j(s.$$.fragment,e),t=!1},d(e){C(s,e)}}}function de(e){let s,t;return s=new oe({props:{shift:e[26]}}),{c(){b(s.$$.fragment)},l(e){D(s.$$.fragment,e)},m(e,a){I(s,e,a),t=!0},p(e,t){const a={};1&t&&(a.shift=e[26]),s.$set(a)},i(e){t||(S(s.$$.fragment,e),t=!0)},o(e){j(s.$$.fragment,e),t=!1},d(e){C(s,e)}}}function ve(e){let s,t,a,l,r,n,i,c,w,P,y,x,V,G,M,k,T,H,F,O,A,R,X,Y,Z,_,q=U(L(new Date,{weekStartsOn:1}),"MMM d")+"",J=U(new Date(N(new Date,{weekStartsOn:1})),"MMM d")+"",K=!e[1]&&he(e),Q=e[1]&&ue(e);V=new ae({props:{title:"Miles",value:e[7]>0?e[7]:0}}),M=new ae({props:{title:"MPG",value:e[8]>0?e[8]:0}}),T=new ae({props:{title:"Gas Cost",value:e[9]>0?e[9]:0,isDollarValue:!0}}),F=new ae({props:{title:"Gross Earned",value:e[10]>0?e[10]:0,isDollarValue:!0}}),A=new ae({props:{title:"Net per Hour",value:e[11]>0?e[11]:0,isDollarValue:!0}});let ee=e[0],se=[];for(let o=0;o<ee.length;o+=1)se[o]=de(fe(e,ee,o));const te=e=>j(se[e],1,1,(()=>{se[e]=null}));return{c(){s=o("div"),t=o("div"),a=o("div"),l=o("h3"),r=f("This Week's Totals & Averages -\n        "),n=f(q),i=f("\n        - "),c=f(J),w=h(),K&&K.c(),P=h(),Q&&Q.c(),y=h(),x=o("div"),b(V.$$.fragment),G=h(),b(M.$$.fragment),k=h(),b(T.$$.fragment),H=h(),b(F.$$.fragment),O=h(),b(A.$$.fragment),R=h(),X=o("h3"),Y=f("This Week's Shifts"),Z=h();for(let e=0;e<se.length;e+=1)se[e].c();this.h()},l(e){s=u(e,"DIV",{class:!0});var o=d(s);t=u(o,"DIV",{class:!0});var f=d(t);a=u(f,"DIV",{class:!0});var h=d(a);l=u(h,"H3",{class:!0});var g=d(l);r=v(g,"This Week's Totals & Averages -\n        "),n=v(g,q),i=v(g,"\n        - "),c=v(g,J),g.forEach(m),w=$(h),K&&K.l(h),P=$(h),Q&&Q.l(h),h.forEach(m),y=$(f),x=u(f,"DIV",{class:!0});var p=d(x);D(V.$$.fragment,p),G=$(p),D(M.$$.fragment,p),k=$(p),D(T.$$.fragment,p),H=$(p),D(F.$$.fragment,p),O=$(p),D(A.$$.fragment,p),p.forEach(m),R=$(f),X=u(f,"H3",{class:!0});var E=d(X);Y=v(E,"This Week's Shifts"),E.forEach(m),Z=$(f);for(let s=0;s<se.length;s+=1)se[s].l(f);f.forEach(m),o.forEach(m),this.h()},h(){g(l,"class","svelte-1wmwb3s"),g(a,"class","relative flex flex-row justify-between items-center mb-5"),g(x,"class","grid grid-cols-5 gap-3 mb-5"),g(X,"class","svelte-1wmwb3s"),g(t,"class","relative w-full max-w-5xl mx-auto pt-28 pb-20"),g(s,"class","page relative h-screen svelte-1wmwb3s")},m(e,o){p(e,s,o),E(s,t),E(t,a),E(a,l),E(l,r),E(l,n),E(l,i),E(l,c),E(a,w),K&&K.m(a,null),E(a,P),Q&&Q.m(a,null),E(t,y),E(t,x),I(V,x,null),E(x,G),I(M,x,null),E(x,k),I(T,x,null),E(x,H),I(F,x,null),E(x,O),I(A,x,null),E(t,R),E(t,X),E(X,Y),E(t,Z);for(let s=0;s<se.length;s+=1)se[s].m(t,null);_=!0},p(e,[s]){e[1]?K&&(K.d(1),K=null):K?(K.p(e,s),2&s&&S(K,1)):(K=he(e),K.c(),S(K,1),K.m(a,P)),e[1]?Q?(Q.p(e,s),2&s&&S(Q,1)):(Q=ue(e),Q.c(),S(Q,1),Q.m(a,null)):Q&&(z(),j(Q,1,1,(()=>{Q=null})),W());const l={};128&s&&(l.value=e[7]>0?e[7]:0),V.$set(l);const r={};256&s&&(r.value=e[8]>0?e[8]:0),M.$set(r);const n={};512&s&&(n.value=e[9]>0?e[9]:0),T.$set(n);const i={};1024&s&&(i.value=e[10]>0?e[10]:0),F.$set(i);const c={};if(2048&s&&(c.value=e[11]>0?e[11]:0),A.$set(c),1&s){let a;for(ee=e[0],a=0;a<ee.length;a+=1){const l=fe(e,ee,a);se[a]?(se[a].p(l,s),S(se[a],1)):(se[a]=de(l),se[a].c(),S(se[a],1),se[a].m(t,null))}for(z(),a=ee.length;a<se.length;a+=1)te(a);W()}},i(e){if(!_){S(K),S(Q),S(V.$$.fragment,e),S(M.$$.fragment,e),S(T.$$.fragment,e),S(F.$$.fragment,e),S(A.$$.fragment,e);for(let e=0;e<ee.length;e+=1)S(se[e]);_=!0}},o(e){j(Q),j(V.$$.fragment,e),j(M.$$.fragment,e),j(T.$$.fragment,e),j(F.$$.fragment,e),j(A.$$.fragment,e),se=se.filter(Boolean);for(let s=0;s<se.length;s+=1)j(se[s]);_=!1},d(e){e&&m(s),K&&K.d(),Q&&Q.d(),C(V),C(M),C(T),C(F),C(A),B(se,e)}}}async function me({session:e}){const{user:s}=e;return s?{}:{status:302,redirect:"/login"}}function $e(e,s,t){let a,l,r,n,i,c,o,f,h;R(e,K,(e=>t(23,f=e))),R(e,ee,(e=>t(0,h=e)));let u,d,v,m,$,g=[],p=[],E=[],w=[],P=[],y=[],b=!1;f.user,O((async()=>{const e=U(L(new Date,{weekStartsOn:1}),"T"),s=U(N(new Date,{weekStartsOn:1}),"T");console.log("Week: ",e,s),console.log("User: ",f.user);const t=await X(),a=await Y(_(t,"shifts"),Z("user","==",f.user));(await q(a)).forEach((e=>{console.log("Doc 1: ",e.data());const s=e.data();g=[...g,s],g=g})),ee.setCurrentWeekShifts(g)}));return e.$$.update=()=>{8193&e.$$.dirty&&(t(13,p=[]),h.forEach((e=>{t(13,p=[...p,parseFloat(e.miles)]),t(13,p),t(0,h)}))),8192&e.$$.dirty&&t(7,a=p.reduce(((e,s)=>e+s),0)),16385&e.$$.dirty&&(t(14,E=[]),h.forEach((e=>{t(14,E=[...E,parseFloat(e.milesPerGallon)]),t(14,E),t(0,h)}))),16384&e.$$.dirty&&t(18,l=E.reduce(((e,s)=>e+s),0)),278528&e.$$.dirty&&t(8,r=(l/E.length).toFixed(1)),32769&e.$$.dirty&&(t(15,w=[]),h.forEach((e=>{t(15,w=[...w,e.gasCost]),t(15,w),t(0,h)}))),32768&e.$$.dirty&&t(9,n=w.reduce(((e,s)=>e+s),0).toFixed(2)),65537&e.$$.dirty&&(t(16,P=[]),h.forEach((e=>{t(16,P=[...P,parseFloat(e.grossEarned)]),t(16,P),t(0,h)}))),65536&e.$$.dirty&&t(10,i=P.reduce(((e,s)=>e+s),0).toFixed(2)),131073&e.$$.dirty&&(t(17,y=[]),h.forEach((e=>{t(17,y=[...y,parseFloat(e.netPerHour)]),t(17,y),t(0,h)}))),131072&e.$$.dirty&&t(19,c=y.reduce(((e,s)=>e+s),0)),655360&e.$$.dirty&&t(11,o=(c/y.length).toFixed(2))},[h,b,u,d,v,m,$,a,r,n,i,o,async function(e){e.preventDefault();const s={gasUsed:e.detail.gasUsed,gasCost:e.detail.gasCost,netEarned:e.detail.netEarned,netPerHour:e.detail.netPerHour,miles:e.detail.miles,milesPerGallon:e.detail.milesPerGallon,gasPrice:e.detail.gasPrice,grossEarned:e.detail.grossEarned,shiftLength:e.detail.shiftLength,netPerMile:e.detail.netPerMile,user:f.user,shiftDate:new Date},a=await X(),l=await J(_(a,"shifts"),s);ee.addCurrentWeekShift(s),t(1,b=!1),t(2,u=""),t(3,d=""),t(4,v=""),t(5,m=""),t(6,$=""),console.log(l)},p,E,w,P,y,l,c,()=>t(1,b=!0),()=>t(1,b=!1)]}export default class extends n{constructor(e){super(),i(this,e,$e,ve,c,{})}}export{me as load};
