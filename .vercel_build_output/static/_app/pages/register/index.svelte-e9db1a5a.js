import{S as s,i as a,s as e,e as r,t as o,k as t,c as n,a as c,g as l,d as i,n as u,b as d,f,D as p,T as m,H as h,I as v,E as w,X as g,Y as x,Z as y,j as I,m as P,o as b,v as $,r as E,w as D,L as j,F as k,a8 as R,P as T,a2 as V,a7 as A,a5 as N}from"../../chunks/vendor-ce82561a.js";import{g as U}from"../../chunks/navigation-20968cc5.js";import{s as L}from"../../chunks/stores-62b324a6.js";import"../../chunks/singletons-bb9012b7.js";function F(s){let a,e,x,y,I,P,b,$,E,D,j,k,R,T,V,A,N,U,L,F,H,O,S,_;return{c(){a=r("div"),e=r("div"),x=r("h3"),y=o("Register"),I=t(),P=r("form"),b=r("div"),$=r("input"),E=t(),D=r("div"),j=r("input"),k=t(),R=r("div"),T=r("input"),V=t(),A=r("button"),N=o("Register"),U=t(),L=r("p"),F=o("Already have an account? "),H=r("a"),O=o("Login"),this.h()},l(s){a=n(s,"DIV",{class:!0});var r=c(a);e=n(r,"DIV",{class:!0});var o=c(e);x=n(o,"H3",{class:!0});var t=c(x);y=l(t,"Register"),t.forEach(i),I=u(o),P=n(o,"FORM",{});var d=c(P);b=n(d,"DIV",{class:!0});var f=c(b);$=n(f,"INPUT",{type:!0,placeholder:!0,class:!0}),f.forEach(i),E=u(d),D=n(d,"DIV",{class:!0});var p=c(D);j=n(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(i),k=u(d),R=n(d,"DIV",{class:!0});var m=c(R);T=n(m,"INPUT",{type:!0,placeholder:!0,class:!0}),m.forEach(i),V=u(d),A=n(d,"BUTTON",{type:!0,class:!0});var h=c(A);N=l(h,"Register"),h.forEach(i),d.forEach(i),U=u(o),L=n(o,"P",{class:!0});var v=c(L);F=l(v,"Already have an account? "),H=n(v,"A",{href:!0,class:!0});var w=c(H);O=l(w,"Login"),w.forEach(i),v.forEach(i),o.forEach(i),r.forEach(i),this.h()},h(){d(x,"class","svelte-1x396nc"),d($,"type","email"),d($,"placeholder","Add your email"),d($,"class","svelte-1x396nc"),d(b,"class","mb-3"),d(j,"type","password"),d(j,"placeholder","Add a password"),d(j,"class","svelte-1x396nc"),d(D,"class","mb-3"),d(T,"type","password"),d(T,"placeholder","Confirm your password"),d(T,"class","svelte-1x396nc"),d(R,"class","mb-3"),d(A,"type","submit"),d(A,"class","svelte-1x396nc"),d(H,"href","login"),d(H,"class","form_link svelte-1x396nc"),d(L,"class","svelte-1x396nc"),d(e,"class","form_container p-10 rounded-xl svelte-1x396nc"),d(a,"class","w-full max-w-sm mx-auto mb-20")},m(r,o){f(r,a,o),p(a,e),p(e,x),p(x,y),p(e,I),p(e,P),p(P,b),p(b,$),m($,s[0]),p(P,E),p(P,D),p(D,j),m(j,s[1]),p(P,k),p(P,R),p(R,T),s[7](T),m(T,s[2]),p(P,V),p(P,A),p(A,N),p(e,U),p(e,L),p(L,F),p(L,H),p(H,O),S||(_=[h($,"input",s[5]),h(j,"input",s[6]),h(T,"input",s[8]),h(P,"submit",v(s[9]))],S=!0)},p(s,[a]){1&a&&$.value!==s[0]&&m($,s[0]),2&a&&j.value!==s[1]&&m(j,s[1]),4&a&&T.value!==s[2]&&m(T,s[2])},i:w,o:w,d(e){e&&i(a),s[7](null),S=!1,g(_)}}}function H(s,a,e){const r=x();let{email:o}=a,{password:t}=a,{confirmPassword:n}=a,{confirmPasswordInput:c}=a;return s.$$set=s=>{"email"in s&&e(0,o=s.email),"password"in s&&e(1,t=s.password),"confirmPassword"in s&&e(2,n=s.confirmPassword),"confirmPasswordInput"in s&&e(3,c=s.confirmPasswordInput)},[o,t,n,c,r,function(){o=this.value,e(0,o)},function(){t=this.value,e(1,t)},function(s){y[s?"unshift":"push"]((()=>{c=s,e(3,c)}))},function(){n=this.value,e(2,n)},()=>r("register",{email:o,password:t})]}class O extends s{constructor(s){super(),a(this,s,H,F,e,{email:0,password:1,confirmPassword:2,confirmPasswordInput:3})}}function S(s){let a,e,o;return e=new O({props:{email:s[0],password:s[1],confirmPassword:s[2],confirmPasswordInput:s[3]}}),e.$on("register",s[4]),{c(){a=r("div"),I(e.$$.fragment),this.h()},l(s){a=n(s,"DIV",{class:!0});var r=c(a);P(e.$$.fragment,r),r.forEach(i),this.h()},h(){d(a,"class","page w-full h-screen flex justify-center items-center svelte-1gu0xuj")},m(s,r){f(s,a,r),b(e,a,null),o=!0},p(s,[a]){const r={};1&a&&(r.email=s[0]),2&a&&(r.password=s[1]),4&a&&(r.confirmPassword=s[2]),e.$set(r)},i(s){o||($(e.$$.fragment,s),o=!0)},o(s){E(e.$$.fragment,s),o=!1},d(s){s&&i(a),D(e)}}}async function _({session:s}){const{user:a}=s;return a?{status:302,redirect:"/dashboard"}:{}}function B(s,a,e){let r,o,t,n;j(s,L,(s=>e(6,r=s)));let c=null;return[o,t,n,undefined,async function(s){s.preventDefault(),c=t===n,c||e(2,n=""),e(1,t=s.detail.password),e(0,o=s.detail.email);try{const s=k();await R(s,o,t).then((s=>{console.log("Res",s),T(L,r.user=s.user.uid,r),console.log("Ses: ",r.user)})),U("dashboard")}catch(a){let s=a.message||a;console.log(s)}try{const s={userId:`${r.user}`},a=await V(),e=await A(N(a,"users"),{userData:s});console.log(e.id)}catch(a){console.log(a)}}]}export default class extends s{constructor(s){super(),a(this,s,B,S,e,{})}}export{_ as load};
